GroupLanguageArray_US =
{
["Aegwynn"] = "English",
["AeriePeak"] = "English",
["Agamaggan"] = "English",
["Aggramar"] = "English",
["Akama"] = "English",
["Alexstrasza"] = "English",
["Alleria"] = "English",
["AltarofStorms"] = "English",
["AlteracMountains"] = "English",
["Aman'thul"] = "English",
["Andorhal"] = "English",
["Anetheron"] = "English",
["Antonidas"] = "English",
["Anub'arak"] = "English",
["Anvilmar"] = "English",
["Arathor"] = "English",
["Archimonde"] = "English",
["Area52"] = "English",
["ArgentDawn"] = "English",
["Arthas"] = "English",
["Arygos"] = "English",
["Auchindoun"] = "English",
["Azgalor"] = "English",
["Azjol-Nerub"] = "English",
["Azralon"] = "Portuguese",
["Azshara"] = "English",
["Azuremyst"] = "English",
["Baelgun"] = "English",
["Balnazzar"] = "English",
["Barthilas"] = "English",
["BlackDragonflight"] = "English",
["Blackhand"] = "English",
["Blackrock"] = "English",
["BlackwaterRaiders"] = "English",
["BlackwingLair"] = "English",
["Blade'sEdge"] = "English",
["Bladefist"] = "English",
["BleedingHollow"] = "English",
["BloodFurnace"] = "English",
["Bloodhoof"] = "English",
["Bloodscalp"] = "English",
["Bonechewer"] = "English",
["BoreanTundra"] = "English",
["Boulderfist"] = "English",
["Bronzebeard"] = "English",
["Burning Blade"] = "English",
["Burning Legion"] = "English",
["Caelestrasz"] = "English",
["Cairne"] = "English",
["CenarionCircle"] = "English",
["Cenarius"] = "English",
["Cho'gall"] = "English",
["Chromaggus"] = "English",
["Coilfang"] = "English",
["Crushridge"] = "English",
["Daggerspine"] = "English",
["Dalaran"] = "English",
["Dalvengyr"] = "English",
["Dark Iron"] = "English",
["Darkspear"] = "English",
["Darrowmere"] = "English",
["Dath'Remar"] = "English",
["Dawnbringer"] = "English",
["Deathwing"] = "English",
["Demon Soul"] = "English",
["Dentarg"] = "English",
["Destromath"] = "English",
["Dethecus"] = "English",
["Detheroc"] = "English",
["Doomhammer"] = "English",
["Draenor"] = "English",
["Dragonblight"] = "English",
["Dragonmaw"] = "English",
["Drak'Tharon"] = "English",
["Drak'thul"] = "English",
["Draka"] = "English",
["Drakkari"] = "Portuguese",
["Dreadmaul"] = "English",
["Drenden"] = "English",
["Dunemaul"] = "English",
["Durotan"] = "English",
["Duskwood"] = "English",
["EarthenRing"] = "English",
["Echo Isles"] = "English",
["Eitrigg"] = "English",
["Eldre'Thalas"] = "English",
["Elune"] = "English",
["Emerald Dream"] = "English",
["Eonar"] = "English",
["Eredar"] = "English",
["Executus"] = "English",
["Exodar"] = "English",
["Farstriders"] = "English",
["Feathermoon"] = "English",
["Fenris"] = "English",
["Firetree"] = "English",
["Fizzcrank"] = "English",
["Frostmane"] = "English",
["Frostmourne"] = "English",
["Frostwolf"] = "English",
["Galakrond"] = "English",
["Gallywix"] = "Portuguese",
["Garithos"] = "English",
["Garona"] = "English",
["Garrosh"] = "English",
["Ghostlands"] = "English",
["Gilneas"] = "English",
["Gnomeregan"] = "English",
["Голдринн"] = "Russian", --goldrinn
["Gorefiend"] = "English",
["Gorgonnash"] = "English",
["Greymane"] = "English",
["GrizzlyHills"] = "English",
["Gul'dan"] = "English",
["Gundrak"] = "English",
["Gurubashi"] = "English",
["Hakkar"] = "English",
["Haomarush"] = "English",
["Hellscream"] = "English",
["Hydraxis"] = "English",
["Hyjal"] = "English",
["Icecrown"] = "English",
["Illidan"] = "English",
["Jaedenar"] = "English",
["Jubei'Thos"] = "English",
["Kael\'thas"] = "English",
["Kalecgos"] = "English",
["Kargath"] = "English",
["Kel'Thuzad"] = "English",
["Khadgar"] = "English",
["Khaz Modan"] = "English",
["Khaz\'goroth"] = "English",
["Kil\'jaeden"] = "English",
["Kilrogg"] = "English",
["Kirin Tor"] = "English",
["Korgath"] = "English",
["KulTiras"] = "English",
["Korialstrasz"] = "English",
["Laughing Skull"] = "English",
["Lethon"] = "English",
["Lightbringer"] = "English",
["Lightning'sBlade"] = "English",
["Lightninghoof"] = "English",
["Llane"] = "English",
["Lothar"] = "English",
["Madoran"] = "English",
["Maelstrom"] = "English",
["Magtheridon"] = "English",
["Maiev"] = "English",
["Mal'Ganis"] = "English",
["Malfurion"] = "English",
["Malorne"] = "English",
["Malygos"] = "English",
["Mannoroth"] = "English",
["Medivh"] = "English",
["Misha"] = "English",
["Mok'Nathal"] = "English",
["MoonGuard"] = "English",
["Moonrunner"] = "English",
["Mug'thol"] = "English",
["Muradin"] = "English",
["Nagrand"] = "English",
["Nathrezim"] = "English",
["Nazgrel"] = "English",
["Nazjatar"] = "English",
["Nemesis"] = "Portuguese",
["Ner'zhul"] = "English",
["Nesingwary"] = "English",
["Nordrassil"] = "English",
["Norgannon"] = "English",
["Onyxia"] = "English",
["Perenolde"] = "English",
["Proudmoore"] = "English",
["Quel'Thalas"] = "Spanish",
["Quel'dorei"] = "English",
["Ragnaros"] = "Spanish",
["Ravencrest"] = "English",
["Ravenholdt"] = "English",
["Rexxar"] = "English",
["Rivendare"] = "English",
["Runetotem"] = "English",
["Sargeras"] = "English",
["Saurfang"] = "English",
["ScarletCrusade"] = "English",
["Scilla"] = "English",
["Sen'jin"] = "English",
["Sentinels"] = "English",
["ShadowCouncil"] = "English",
["Shadowmoon"] = "English",
["Shadowsong"] = "English",
["Shandris"] = "English",
["Shattered Halls"] = "English",
["Shattered Hand"] = "English",
["Shu'halo"] = "English",
["Silver Hand"] = "English",
["Silvermoon"] = "English",
["SistersofElune"] = "English",
["Skullcrusher"] = "English",
["Skywall"] = "English",
["Smolderthorn"] = "English",
["Spinebreaker"] = "English",
["Spirestone"] = "English",
["Staghelm"] = "English",
["SteamwheedleCartel"] = "English",
["Stonemaul"] = "English",
["Stormrage"] = "English",
["Stormreaver"] = "English",
["Stormscale"] = "English",
["Suramar"] = "English",
["Tanaris"] = "English",
["Terenas"] = "English",
["Terokkar"] = "English",
["Thaurissan"] = "English",
["TheForgottenCoast"] = "English",
["TheScryers"] = "English",
["TheUnderbog"] = "English",
["TheVentureCo"] = "English",
["ThoriumBrotherhood"] = "English",
["Thrall"] = "English",
["Thunderhorn"] = "English",
["Thunderlord"] = "English",
["Tichondrius"] = "English",
["TolBarad"] = "Portuguese",
["Tortheldrin"] = "English",
["Trollbane"] = "English",
["Turalyon"] = "English",
["Twisting Nether"] = "English",
["Uldaman"] = "English",
["Uldum"] = "English",
["Undermine"] = "English",
["Ursin"] = "English",
["Uther"] = "English",
["Vashj"] = "English",
["Vek'nilash"] = "English",
["Velen"] = "English",
["Warsong"] = "English",
["Whisperwind"] = "English",
["Wildhammer"] = "English",
["Windrunner"] = "English",
["Winterhoof"] = "English",
["WyrmrestAccord"] = "English",
["Ysera"] = "English",
["Ysondre"] = "English",
["Zangarmarsh"] = "English",
["Zul'jin"] = "English",
["Zuluhed"] = "English"
}

GroupLanguageArray_EU =
{
	["Aegwynn"] = "German",
	["AeriePeak"] = "English",
	["Agamaggan"] = "English",
	["Aggra(Portugu\195\170s)"] = "Portuguese",
	["Aggramar"] = "English",
	["Ahn'Qiraj"] = "English",
	["Al'Akir"] = "English",
	["Alexstrasza"] = "German",
	["Alleria"] = "German",
	["Alonsus"] = "English",
	["Aman'thul"] = "German",
	["Ambossar"] = "German",
	["Anachronos"] = "English",
	["Anetheron"] = "German",
	["Antonidas"] = "German",
	["Anub'arak"] = "German",
	["Arakarahm"] = "French",
	["Arathi"] = "French",
	["Arathor"] = "English",
	["Archimonde"] = "French",
	["Area52"] = "German",
	["ArgentDawn"] = "English",
	["Arthas"] = "German",
	["Arygos"] = "German",
	["Ashenvale"] = "Russian",
	["Aszune"] = "English",
	["Auchindoun"] = "English",
	["AzjolNerub"] = "English",
	["Azshara"] = "German",
	["????????"] = "Russian",
	["Azuremyst"] = "English",
	["Baelgun"] = "German",
	["Balnazzar"] = "English",
	["Blackhand"] = "German",
	["Blackmoore"] = "German",
	["Blackrock"] = "German",
	["Blackscar"] = "Russian",
	["Blade'sEdge"] = "English",
	["Bladefist"] = "English",
	["Bloodfeather"] = "English",
	["Bloodhoof"] = "English",
	["Bloodscalp"] = "English",
	["Blutkessel"] = "German",
	["BootyBay"] = "Russian",
	["BoreanTundra"] = "Russian",
	["Boulderfist"] = "English",
	["BronzeDragonflight"] = "English",
	["Bronzebeard"] = "English",
	["BurningBlade"] = "English",
	["BurningLegion"] = "English",
	["BurningSteppes"] = "English",
	["C'Thun"] = "Spanish",
	["ChamberofAspects"] = "English",
	["Chants\195\169ternels"] = "French",
	["Cho'gall"] = "French",
	["Chromaggus"] = "English",
	["ColinasPardas"] = "Spanish",
	["Confr\195\169rieduThorium"] = "French",
	["ConseildesOmbres"] = "French",
	["Crushridge"] = "English",
	["CultedelaRivenoire"] = "French",
	["Daggerspine"] = "English",
	["Dalaran"] = "French",
	["Dalvengyr"] = "German",
	["DarkmoonFaire"] = "English",
	["Darksorrow"] = "English",
	["Darkspear"] = "English",
	["DasKonsortium"] = "German",
	["DasSyndikat"] = "German",
	["Deathguard"] = "Russian",
	["Deathweaver"] = "Russian",
	["Deepholm"] = "Russian",
	["DefiasBrotherhood"] = "English",
	["Dentarg"] = "English",
	["DerAbyssischeRat"] = "German",
	["DerMithrilorden"] = "German",
	["DerRatvonDalaran"] = "German",
	["Destromath"] = "German",
	["DieAldor"] = "German",
	["Dethecus"] = "German",
	["DieArguswacht"] = "German",
	["DieewigeWacht"] = "German",
	["DieNachtwache"] = "German",
	["DieSilberneHand"] = "German",
	["DieTodeskrallen"] = "German",
	["Doomhammer"] = "English",
	["Draenor"] = "English",
	["Dragonblight"] = "English",
	["Dragonmaw"] = "English",
	["Drak'thul"] = "English",
	["Drek'Thar"] = "French",
	["DunModr"] = "Spanish",
	["DunMorogh"] = "German",
	["Dunemaul"] = "English",
	["Durotan"] = "German",
	["EarthenRing"] = "English",
	["Echsenkessel"] = "German",
	["Eitrigg"] = "French",
	["Eldre'Thalas"] = "French",
	["Elune"] = "French",
	["EmeraldDream"] = "English",
	["Emeriss"] = "English",
	["Eonar"] = "English",
	["Eredar"] = "German",
	["Eversong"] = "Russian",
	["Executus"] = "English",
	["Exodar"] = "Spanish",
	["FestungderSt\195\188rme"] = "German",
	["Fordragon"] = "Russian",
	["Forscherliga"] = "German",
	["Frostmane"] = "English",
	["Frostmourne"] = "German",
	["Frostwhisper"] = "English",
	["Frostwolf"] = "German",
	["Galakrond"] = "Russian",
	["Garona"] = "French",
	["Garrosh"] = "German",
	["Genjuros"] = "English",
	["Ghostlands"] = "English",
	["Gilneas"] = "German",
	["Goldrinn"] = "Russian",
	["Gordunni"] = "Russian",
	["Gorgonnash"] = "German",
	["Greymane"] = "Russian",
	["GrimBatol"] = "English",
	["Grom"] = "Russian",
	["Gul'dan"] = "German",
	["Hakkar"] = "English",
	["Haomarush"] = "English",
	["Hellfire"] = "English",
	["Hellscream"] = "English",
	["HowlingFjord"] = "Russian",
	["Hyjal"] = "French",
	["Illidan"] = "French",
	["Jaedenar"] = "English",
	["Kael\'thas"] = "French",
	["Karazhan"] = "English",
	["Kargath"] = "German",
	["Kazzak"] = "English",
	["Kel'Thuzad"] = "German",
	["Khadgar"] = "English",
	["KhazModan"] = "French",
	["Khaz'goroth"] = "German",
	["Kil'jaeden"] = "German",
	["Kilrogg"] = "English",
	["KirinTor"] = "French",
	["Kor'gall"] = "English",
	["Krag'jin"] = "German",
	["Krasus"] = "French",
	["KultderVerdammten"] = "German",
	["LaCroisade\195\169carlate"] = "French",
	["LaughingSkull"] = "English",
	["LesClairvoyants"] = "French",
	["LesSentinelles"] = "French",
	["LichKing"] = "Russian",
	["Lightbringer"] = "English",
	["Lighning'sBlade"] = "English",
	["Lordaeron"] = "German",
	["LosErrantes"] = "Spanish",
	["Lothar"] = "German",
	["Madmortem"] = "German",
	["Magtheridon"] = "English",
	["Mal'Ganis"] = "German",
	["Malfurion"] = "German",
	["Malorne"] = "German",
	["Malygos"] = "German",
	["Mannoroth"] = "German",
	["Mar\195\169cagedeZangar"] = "French",
	["Mazrigos"] = "English",
	["Medivh"] = "French",
	["Minahonda"] = "Spanish",
	["Moonglade"] = "English",
	["Mug'thol"] = "German",
	["Nagrand"] = "English",
	["Nathrezim"] = "German",
	["Naxxramas"] = "French",
	["Nazjatar"] = "German",
	["Nefarian"] = "German",
	["Nemesis"] = "Italian",
	["Neptulon"] = "English",
	["Ner'zhul"] = "French",
	["Nera'thor"] = "German",
	["Nethersturm"] = "German",
	["Nordrassil"] = "English",
	["Norgannon"] = "German",
	["Nozdormu"] = "German",
	["Onyxia"] = "German",
	["Outland"] = "English",
	["Perenolde"] = "German",
	["Pozzodell\'Eternit\195\160"] = "Italian",
	["Proudmoore"] = "German",
	["Quel'Thalas"] = "English",
	["Ragnaros"] = "English",
	["Rajaxx"] = "German",
	["Rashgarroth"] = "French",
	["Ravencrest"] = "English",
	["Ravenholdt"] = "English",
	["Razuvious"] = "Russian",
	["Rexxar"] = "German",
	["Runetotem"] = "English",
	["Sanguino"] = "Spanish",
	["Sargeras"] = "French",
	["Saurfang"] = "English",
	["ScarshieldLegion"] = "English",
	["Sen'jin"] = "German",
	["Shadowsong"] = "English",
	["ShatteredHalls"] = "English",
	["ShatteredHand"] = "English",
	["Shattrath"] = "German",
	["Shen'dralar"] = "Spanish",
	["Silvermoon"] = "English",
	["Sinstralis"] = "French",
	["Skullcrusher"] = "English",
	["Soulflayer"] = "Russian",
	["Spinebreaker"] = "English",
	["Sporeggar"] = "English",
	["SteamwheedleCartel"] = "English",
	["Stormrage"] = "English",
	["Stormreaver"] = "English",
	["Stormscale"] = "English",
	["Sunstrider"] = "English",
	["Suramar"] = "French",
	["Sylvanas"] = "English",
	["Taerar"] = "German",
	["Talnivarr"] = "English",
	["TarrenMill"] = "English",
	["Teldrassil"] = "German",
	["Templenoir"] = "French",
	["Terenas"] = "English",
	["Terokkar"] = "English",
	["Terrordar"] = "German",
	["TheMaelstrom"] = "English",
	["TheSha'tar"] = "English",
	["TheVenture Co"] = "English",
	["Theradras"] = "German",
	["Thermaplugg"] = "Russian",
	["Thrall"] = "German",
	["Throk'Feroth"] = "French",
	["Thunderhorn"] = "English",
	["Tichondrius"] = "German",
	["Tirion"] = "German",
	["Todeswache"] = "German",
	["Trollbane"] = "English",
	["Turalyon"] = "English",
	["Twilight'sHammer"] = "English",
	["TwistingNether"] = "English",
	["Tyrande"] = "Spanish",
	["Uldaman"] = "French",
	["Ulduar"] = "German",
	["Uldum"] = "Spanish",
	["Un'Goro"] = "German",
	["Varimathras"] = "French",
	["Vashj"] = "English",
	["Vek'lor"] = "German",
	["Vek'nilash"] = "English",
	["Vol'jin"] = "French",
	["Wildhammer"] = "English",
	["Wrathbringer"] = "German",
	["Xavius"] = "English",
	["Ysera"] = "German",
	["Ysondre"] = "French",
	["Zenedar"] = "English",
	["ZirkeldesCenarius"] = "German",
	["Zul'jin"] = "Spanish",
	["Zuluhed"] = "German"
}

local function spairs(t, order)
    local keys = {}
    for k in pairs(t) do
		table.insert(keys, k)
	end

    if order then
        table.sort(keys, function(a,b) return order(t, a, b) end)
    else
        table.sort(keys)
    end

    local i = 0
    return function()
        i = i + 1
        if keys[i] then
            return keys[i], t[keys[i]]
        end
    end
end

local function AggregatePlayers(list)
	local partylanguages = GroupLanguageArray_US
	if (GetCVar('portal') == "EU") then
		partylanguages = GroupLanguageArray_EU
	end
	local rlist = {}
	for i, v in pairs(list) do
		local _, _, _, _, _, name, realm = GetPlayerInfoByGUID(i)

                

		if (name == nil or name == "") then
			name = "Unknown"
		end
		if (realm == nil or realm == "") then
			realm = GetRealmName()
		end
                
		local rlang = partylanguages[realm]
		if (rlang == nil) then
			rlang = "Russian/Other"
		end
		if (rlist[rlang] == nil) then
			rlist[rlang] = {}
		end
		table.insert(rlist[rlang], name.."-"..realm)
	end

	local rlines = {}
	for i, v in spairs(rlist) do
		local s = "|cFF00f04d"..i..":|cffffcc00"
		local multi = false
		table.sort(v)
		for j, w in ipairs(v) do
			if (multi == true) then
				s = s..","
			end
			multi = true
			s = s.." "..w
		end
		table.insert(rlines, s)
	end
	return rlines
end

local function SlashCommandHandler(msg, editbox)
	local list = {}
	if (GetNumGroupMembers() > 0) then
		for i = 1, 40 do
			if (UnitExists("raid"..i)) then
				list[UnitGUID("raid"..i)] = 1
			end
		end
		for i = 1, 4 do
			if (UnitExists("party"..i)) then
				list[UnitGUID("party"..i)] = 1
			end
		end
	end
	list[UnitGUID("player")] = 1
	local result = AggregatePlayers(list)
	for i, v in ipairs(result) do
		print(v)
	end

end


function GroupLanguage_OnLoad(panel)
        
      
        panel.name = "GroupLanguage " .. GetAddOnMetadata("GroupLanguage", "Version");

        panel.okay = function (self) SC_ChaChingPanel_Close(); 


        end;

        panel.cancel = function (self)  SC_ChaChingPanel_CancelOrLoad();  


        end;


        InterfaceOptions_AddCategory(panel);

        

        btnShowMMB = CreateFrame("Button", "btn_showmmb", GroupLanguageF, "UIPanelButtonTemplate")
        btnShowMMB:SetPoint("CENTER", -120, 0)
        btnShowMMB:SetWidth(160)
        btnShowMMB:SetHeight(22)
        btnShowMMB:SetText("Show Minimap Button")
	
        btnShowMMB:SetScript("OnClick", 
             function()
              GroupLanguageMButton:Show()

              GroupLanguage_MinimapbuttonState = 1
        end);


        btnHideMMB = CreateFrame("Button", "btn_hidemmb", GroupLanguageF, "UIPanelButtonTemplate")
        btnHideMMB:SetPoint("CENTER", 120, 0)
        btnHideMMB:SetWidth(160)
        btnHideMMB:SetHeight(22)
        btnHideMMB:SetText("Hide Minimap Button")
	
        btnHideMMB:SetScript("OnClick", 
             function()
              GroupLanguageMButton:Hide()

              GroupLanguage_MinimapbuttonState = 0
        end);


        btnFrameLVL = CreateFrame("Button", "btn_framelvl", GroupLanguageF, "UIPanelButtonTemplate")
        btnFrameLVL:SetPoint("CENTER", 0, -30)
        btnFrameLVL:SetWidth(160)
        btnFrameLVL:SetHeight(22)
        btnFrameLVL:SetText("Set Button FrameLevel")
	
        btnFrameLVL:SetScript("OnClick", 
             function()
              GroupLanguageMButton:SetFrameLevel("200")
        end);

    end



SLASH_GroupLanguage1 = "/GroupLanguage"
SlashCmdList["GroupLanguage"] = SlashCommandHandler


function Button_OnClick()

   
	SlashCommandHandler();	
end

GroupLanguage_Settings = {
	MinimapPos = GroupLanguage_SaveData;
        mmbState = GroupLanguage_MinimapbuttonState;
}

function GroupLanguage_MinimapButton_Reposition()
                Button:SetPoint("TOPLEFT","Minimap","TOPLEFT",52-(80*cos(GroupLanguage_SaveData)),(80*sin(GroupLanguage_SaveData))-52)
            end

function GroupLanguage_MinimapButton_DraggingFrame_OnUpdate()

	local xpos,ypos = GetCursorPosition()
	local xmin,ymin = Minimap:GetLeft(), Minimap:GetBottom()

	xpos = xmin-xpos/UIParent:GetScale()+70 -- get coordinates as differences from the center of the minimap
	ypos = ypos/UIParent:GetScale()-ymin-70

	GroupLanguage_Settings.MinimapPos = math.deg(math.atan2(ypos,xpos)) -- save the degrees we are relative to the minimap center
	GroupLanguage_MinimapButton_Reposition() -- move the button

        GroupLanguage_SaveData = 0
        GroupLanguage_Settings.MinimapPos = 0
        GroupLanguage_Settings.MinimapPos = GroupLanguage_SaveData

            

        GroupLanguage_MinimapButton_Reposition()

        GroupLanguage_SaveData = GroupLanguage_Settings.MinimapPos

end






function GroupLanguage_MinimapButton_OnEnter(self)
	if (self.dragging) then
		return
	end
	GameTooltip:SetOwner(self or UIParent, "ANCHOR_LEFT")
	GroupLanguage_MinimapButton_Details(GameTooltip)
end


function GroupLanguage_MinimapButton_Details(tt, ldb)
	tt:SetText("GroupLanguage")

end

       

local frame = CreateFrame("FRAME");

frame:RegisterEvent("ADDON_LOADED");
frame:RegisterEvent("PLAYER_LOGOUT");
frame:RegisterEvent("GROUP_JOINED");

frame:SetScript("OnEvent", function(self, event, arg1)
    if event == "ADDON_LOADED" and arg1 == "GroupLanguage" then
    
        if GroupLanguage_MinimapbuttonState == 0 then
            GroupLanguageMButton:Hide()
        end

        if GroupLanguage_MinimapbuttonState == 1 then
            GroupLanguageMButton:Show()
            GroupLanguageMButton:SetFrameLevel("200")
        end

        if GroupLanguage_SaveData == nil then
      
            GroupLanguage_SaveData = GroupLanguage_Settings.MinimapPos
        end
        
              GroupLanguageMButton:SetFrameLevel("200")

        btnFrameLVL:Hide(); 


    end

    if event == "PLAYER_LOGOUT" then
            -- Save the time at which the character logs out
            GroupLanguage_SaveData = GroupLanguage_Settings.MinimapPos
    end

    if event == "GROUP_JOINED" then
        C_Timer.After(3, SlashCommandHandler)
        

    end
end)

